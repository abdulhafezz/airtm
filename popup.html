<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIRTM CASHIER</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>AIRTM CASHIER</h1>
            <div class="status-indicator">
                <span id="status-text">Loading...</span>
                <div id="status-dot"></div>
            </div>
        </header>

        <div class="p2p-rate-container">
            <div class="p2p-rate-header">
                <h2>Current P2P Rate</h2>
                <button id="refresh-p2p-rate" class="btn-icon" title="Refresh P2P Rate">
                    <svg viewBox="0 0 24 24" width="16" height="16">
                        <path fill="currentColor" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                    </svg>
                </button>
            </div>
            <div class="p2p-rate-value">
                <span id="p2p-rate">Loading...</span>
                <span class="p2p-rate-currency">EGP</span>
            </div>
            <div class="p2p-rate-source">
                Source: <a href="https://p2p.army/en/p2p/fiats/EGP" target="_blank">p2p.army</a>
                <span id="p2p-rate-time" class="p2p-rate-time">Last updated: --</span>
            </div>
        </div>

        <!-- Egyptian Payment Methods Section -->
        <div class="payment-methods-container">
            <div class="payment-methods-header">
                <h2>Egyptian Payment Methods</h2>
                <button id="refresh-payment-methods" class="btn-icon" title="Refresh Payment Methods">
                    <svg viewBox="0 0 24 24" width="16" height="16">
                        <path fill="currentColor" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                    </svg>
                </button>
            </div>
            <div class="payment-methods-table">
                <table>
                    <thead>
                        <tr>
                            <th>Payment Method</th>
                            <th>Buy Price</th>
                            <th>Sell Price</th>
                        </tr>
                    </thead>
                    <tbody id="payment-methods-body">
                        <!-- Payment methods will be inserted here dynamically -->
                        <tr>
                            <td colspan="3" class="loading-text">Loading payment methods...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="payment-methods-source">
                Source: <a href="https://p2p.army/en/p2p/prices/binance?fiatUnit=EGP" target="_blank">p2p.army</a>
                <span id="payment-methods-time" class="payment-methods-time">Last updated: --</span>
            </div>
        </div>

        <div class="stats-container">
            <div class="stat-box">
                <div class="stat-label">Total Offers</div>
                <div id="total-offers" class="stat-value">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Pending</div>
                <div id="pending-offers" class="stat-value">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Last Offer</div>
                <div id="last-offer-time" class="stat-value">Never</div>
            </div>
        </div>

        <div class="action-buttons">
            <button id="toggle-monitoring" class="btn primary">Enable Monitoring</button>
            <button id="open-airtm" class="btn secondary">Open Airtm</button>
            <button id="clear-counter" class="btn secondary">Clear Counter</button>
        </div>

        <div class="settings-section">
            <h2>Notification Settings</h2>
            <div class="form-group checkbox">
                <input type="checkbox" id="chrome-notifications" checked>
                <label for="chrome-notifications">Chrome Notifications</label>
            </div>
            <div class="form-group checkbox">
                <input type="checkbox" id="notification-sound" checked>
                <label for="notification-sound">Notification Sound</label>
                <button id="test-sound" class="btn-icon" title="Test Sound">
                    <svg viewBox="0 0 24 24" width="16" height="16">
                        <path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="settings-section">
            <h2>Telegram Integration</h2>
            <div class="form-group">
                <label for="bot-token">Bot Token</label>
                <input type="password" id="bot-token" placeholder="Enter Telegram Bot Token">
            </div>
            <div class="form-group">
                <label for="chat-id">Chat ID</label>
                <input type="text" id="chat-id" placeholder="Enter Telegram Chat ID">
            </div>
            <button id="test-telegram" class="btn secondary">Test Telegram</button>
            <div id="telegram-test-result" class="test-result"></div>
        </div>

        <div class="settings-section">
            <h2>Auto-Accept Settings</h2>
            <div class="form-group checkbox">
                <input type="checkbox" id="auto-accept">
                <label for="auto-accept">Auto-Accept if Sufficient Balance</label>
            </div>
            <div class="form-group">
                <label for="vodafone-balance">Vodafone Balance (EGP)</label>
                <input type="number" id="vodafone-balance" placeholder="0">
            </div>
            <div class="form-group">
                <label for="usd-egp-rate">USD to EGP Rate</label>
                <input type="number" id="usd-egp-rate" placeholder="0">
            </div>
            <div class="form-group">
                <label for="min-offer">Min Offer (USD)</label>
                <input type="number" id="min-offer" placeholder="0">
            </div>
            <div class="form-group">
                <label for="max-offer">Max Offer (USD)</label>
                <input type="number" id="max-offer" placeholder="0">
            </div>
        </div>

        <div class="settings-section">
            <h2>Advanced Settings</h2>
            <div class="form-group">
                <label for="poll-interval">Poll Interval (ms)</label>
                <input type="number" id="poll-interval" placeholder="30000">
            </div>
            <div class="form-group">
                <label for="p2p-rate-interval">P2P Rate Check Interval (ms)</label>
                <input type="number" id="p2p-rate-interval" placeholder="300000">
            </div>
            <button id="save-settings" class="btn primary">Save Settings</button>
        </div>

        <footer>
            <p>AIRTM CASHIER v1.3.0 - Advanced Edition</p>
        </footer>
    </div>
    <script src="popup.js"></script>
</body>
</html>
